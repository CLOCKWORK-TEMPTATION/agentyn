# متطلبات نظام Multi-Agent للتفريغ السينمائي بمنهجية القراءات الثلاث

## مقدمة

نظام Multi-Agent متقدم يطبق منهجية "القراءات الثلاث" (The Three-Read Approach) لتفريغ السيناريوهات السينمائية بدقة واحترافية. يهدف النظام إلى ضمان فهم السياق الكامل للقصة وتجنب الأخطاء التقنية من خلال تطبيق ثلاث مراحل متتالية من التحليل.

## مسرد المصطلحات

- **Multi-Agent System**: نظام متعدد الوكلاء يتكون من وكلاء ذكيين متخصصين يعملون بشكل تعاوني (TypeScript)
- **القراءة العاطفية**: المرحلة الأولى من التحليل التي تركز على فهم التدفق السردي والإيقاع
- **القراءة التقنية**: المرحلة الثانية التي تركز على التنسيق واكتشاف الأخطاء الهيكلية
- **قراءة التفريغ**: المرحلة الثالثة التي تتضمن تحديد وتصنيف العناصر الإنتاجية
- **Supervisor Agent**: الوكيل الرابع الذي يحكم بين الوكلاء الثلاثة ويحل التضارب
- **Script Breakdown**: عملية تحليل السيناريو لاستخراج جميع العناصر المطلوبة للإنتاج
- **Breakdown Sheets**: أوراق التفريغ التي تحتوي على تفاصيل كل مشهد وعناصره
- **Element Categories**: الفئات الـ21 الرئيسية لتصنيف عناصر الإنتاج السينمائي
- **Revolutionary Breakdown Engine**: النظام الثوري الموجود (Python) الذي سيتم دمجه وتطويره
- **Ultimate Breakdown System**: النظام المتقدم الحالي (Python) الذي سيتم الاستفادة من خوارزمياته
- **Hybrid Architecture**: معمارية هجينة تجمع بين Python (Brain Layer) و TypeScript (Orchestrator Layer)

## المتطلبات

### المتطلب 1

**قصة المستخدم:** كمنتج سينمائي، أريد نظام Multi-Agent يطبق منهجية القراءات الثلاث، حتى أحصل على تفريغ دقيق وشامل للسيناريو.

#### معايير القبول

1. WHEN يتم تحميل السيناريو THEN النظام SHALL ينشئ ثلاثة وكلاء متخصصين لكل مرحلة قراءة
2. WHEN يبدأ التحليل THEN النظام SHALL يطبق المراحل الثلاث بالتسلسل الصحيح
3. WHEN تكتمل المراحل الثلاث THEN النظام SHALL يولد تقرير تفريغ شامل يحتوي على جميع العناصر المحددة
4. WHEN يحدث تضارب بين الوكلاء THEN النظام SHALL يطبق آلية حل النزاعات والتحكيم
5. WHEN يكتمل التحليل THEN النظام SHALL يحفظ النتائج بتنسيقات متعددة (HTML, JSON, PDF)

### المتطلب 2

**قصة المستخدم:** كمساعد مخرج، أريد وكيل متخصص في القراءة العاطفية، حتى أفهم التدفق السردي والإيقاع العاطفي للقصة.

#### معايير القبول

1. WHEN يبدأ وكيل القراءة العاطفية THEN النظام SHALL يحلل النص كمشاهد وليس كمنتج
2. WHEN يحلل الوكيل النص THEN النظام SHALL يركز على التدفق السردي والإيقاع واللحظات العاطفية
3. WHEN يكتمل التحليل العاطفي THEN النظام SHALL يولد تقرير يحتوي على الانطباع الأولي الكامل للقصة
4. WHEN يعمل الوكيل THEN النظام SHALL يمنع تدوين أي ملاحظات أو وضع علامات في هذه المرحلة
5. WHEN ينتهي التحليل THEN النظام SHALL يحدد رؤية المخرج والمشاعر المستهدفة

### المتطلب 3

**قصة المستخدم:** كمدير إنتاج، أريد وكيل متخصص في القراءة التقنية، حتى أكتشف الأخطاء الهيكلية قبل بدء العمل.

#### معايير القبول

1. WHEN يبدأ وكيل القراءة التقنية THEN النظام SHALL يركز حصرياً على التنسيق واكتشاف الأخطاء
2. WHEN يفحص الوكيل النص THEN النظام SHALL يتحقق من اتساق ترويسات المشاهد وتحديد المواقع والتوقيت
3. WHEN يجد الوكيل أخطاء تنسيق THEN النظام SHALL يولد تقرير مفصل بالأخطاء المكتشفة
4. WHEN يكتمل الفحص التقني THEN النظام SHALL يضمن عدم وجود فساد في البيانات أو تكرار في الشخصيات والمواقع
5. WHEN ينتهي التحليل THEN النظام SHALL يقدم توصيات لإصلاح الأخطاء المكتشفة

### المتطلب 4

**قصة المستخدم:** كمساعد مخرج أول، أريد وكيل متخصص في قراءة التفريغ، حتى أحصل على تحديد دقيق لجميع العناصر الإنتاجية.

#### معايير القبول

1. WHEN يبدأ وكيل قراءة التفريغ THEN النظام SHALL يمسح النص ويعزل العناصر الإنتاجية
2. WHEN يحدد الوكيل العناصر THEN النظام SHALL يصنفها باستخدام الفئات الـ21 القياسية
3. WHEN يصنف العناصر THEN النظام SHALL يطبق الترميز اللوني أو الأدوات الرقمية المناسبة
4. WHEN يكتمل التصنيف THEN النظام SHALL يولد أوراق تفريغ مفصلة لكل مشهد
5. WHEN ينتهي التحليل THEN النظام SHALL يضمن أن عملية التفكيك تمت بناءً على فهم عميق للسياق

### المتطلب 5

**قصة المستخدم:** كمنسق إنتاج، أريد النظام يستخرج العناصر الـ21 الرئيسية، حتى أغطي جميع الاحتياجات اللوجستية والفنية.

#### معايير القبول

1. WHEN يحلل النظام المشهد THEN النظام SHALL يستخرج الممثلين والكومبارس والإكسسوارات
2. WHEN يستمر التحليل THEN النظام SHALL يحدد ديكور الموقع والملابس والمكياج والشعر
3. WHEN يتقدم التحليل THEN النظام SHALL يستخرج المجازفات والمركبات والمؤثرات الخاصة والبصرية
4. WHEN يكتمل الاستخراج THEN النظام SHALL يحدد الماشية ومدربي الحيوانات والخضرة والنباتات
5. WHEN ينتهي التحليل THEN النظام SHALL يستخرج الصوت والموسيقى والمعدات الخاصة والمؤثرات الميكانيكية والأمن والعمالة الإضافية والمتنوعات وملاحظات المشهد

### المتطلب 6

**قصة المستخدم:** كمدير تقني، أريد النظام يدعم نماذج الذكاء الاصطناعي المتعددة، حتى أحصل على أفضل أداء لكل نوع من التحليل.

#### معايير القبول

1. WHEN يتم تكوين النظام THEN النظام SHALL يدعم نماذج Groq (Llama 4, Kimi K2, Qwen3)
2. WHEN يتم التكوين THEN النظام SHALL يدعم نماذج OpenAI (GPT-5, GPT-5.2)
3. WHEN يستمر التكوين THEN النظام SHALL يدعم نماذج Google (Gemini 3 Flash, Gemini 3 Pro)
4. WHEN يكتمل التكوين THEN النظام SHALL يدعم نماذج Anthropic (Claude 4 Sonnet, Claude 4.5 Sonnet)
5. WHEN يعمل النظام THEN النظام SHALL يوزع المهام على النماذج المختلفة حسب التخصص والكفاءة

### المتطلب 7

**قصة المستخدم:** كمستخدم للنظام، أريد واجهة تفاعلية سهلة الاستخدام، حتى أتمكن من إدارة عملية التفريغ بكفاءة.

#### معايير القبول

1. WHEN يفتح المستخدم النظام THEN النظام SHALL يعرض واجهة واضحة لتحميل السيناريو
2. WHEN يحمل المستخدم الملف THEN النظام SHALL يعرض تقدم العمل في الوقت الفعلي
3. WHEN تعمل الوكلاء THEN النظام SHALL يعرض حالة كل وكيل ونتائجه الجزئية
4. WHEN تكتمل العملية THEN النظام SHALL يعرض النتائج بتنسيق قابل للقراءة والتصدير
5. WHEN يحدث خطأ THEN النظام SHALL يعرض رسائل خطأ واضحة مع اقتراحات للحل

### المتطلب 8

**قصة المستخدم:** كمحلل جودة، أريد النظام يطبق آليات ضمان الجودة والتحقق، حتى أضمن دقة النتائج.

#### معايير القبول

1. WHEN تكتمل كل مرحلة THEN النظام SHALL يطبق فحص جودة للنتائج
2. WHEN يحدث تضارب بين الوكلاء THEN النظام SHALL يطبق آلية التحكيم والمراجعة
3. WHEN تكتمل العملية THEN النظام SHALL يولد تقرير ثقة يوضح مستوى الدقة المتوقع
4. WHEN يكتشف النظام أخطاء محتملة THEN النظام SHALL يعلم المستخدم ويطلب المراجعة
5. WHEN ينتهي التحليل THEN النظام SHALL يحفظ سجل مفصل لجميع القرارات والتعديلات

### المتطلب 9

**قصة المستخدم:** كمصدر بيانات، أريد النظام يدعم تنسيقات متعددة للإدخال والإخراج، حتى يتكامل مع أدوات الإنتاج الأخرى.

#### معايير القبول

1. WHEN يستقبل النظام الملفات THEN النظام SHALL يدعم تنسيقات .txt و .pdf و .fdx و .fountain
2. WHEN يصدر النظام النتائج THEN النظام SHALL يولد تقارير HTML تفاعلية
3. WHEN يحفظ النتائج THEN النظام SHALL يصدر بيانات JSON للتكامل مع أنظمة أخرى
4. WHEN يطلب المستخدم THEN النظام SHALL يولد تقارير PDF قابلة للطباعة
5. WHEN تكتمل العملية THEN النظام SHALL يحفظ نسخة احتياطية من جميع البيانات والنتائج

### المتطلب 10

**قصة المستخدم:** كمطور نظام، أريد معمارية قابلة للتوسع والصيانة، حتى يمكن تطوير النظام وإضافة ميزات جديدة.

#### معايير القبول

1. WHEN يتم تصميم النظام THEN النظام SHALL يستخدم معمارية Microservices للوكلاء في TypeScript
2. WHEN يتم التطوير THEN النظام SHALL يطبق مبادئ SOLID وClean Architecture
3. WHEN يتم النشر THEN النظام SHALL يدعم التشغيل في بيئات Docker وKubernetes
4. WHEN يتم التشغيل THEN النظام SHALL يوفر APIs موثقة للتكامل الخارجي
5. WHEN يتم الصيانة THEN النظام SHALL يحتوي على نظام مراقبة وسجلات مفصلة

### المتطلب 11

**قصة المستخدم:** كمدير جودة، أريد Supervisor Agent يحكم بين الوكلاء الثلاثة، حتى أضمن اتساق النتائج وحل التضارب.

#### معايير القبول

1. WHEN تكتمل القراءات الثلاث THEN النظام SHALL ينشئ Supervisor Agent لمراجعة جميع التقارير
2. WHEN يجد Supervisor تضارب THEN النظام SHALL يطبق قواعد منطقية لحل النزاعات
3. WHEN يحدث تضارب بين العاطفي والتقني THEN النظام SHALL يعطي الأولوية للنص الأصلي
4. WHEN يكتشف Supervisor أخطاء THEN النظام SHALL يطلب إعادة تحليل من الوكيل المختص
5. WHEN يكتمل التحكيم THEN النظام SHALL يولد تقرير نهائي موحد ومتسق

### المتطلب 12

**قصة المستخدم:** كمهندس معمارية، أريد Hybrid Architecture تجمع بين قوة Python وسهولة TypeScript، حتى أستفيد من أفضل ما في العالمين.

#### معايير القبول

1. WHEN يتم تصميم النظام THEN النظام SHALL يستخدم Python Container للذكاء المتقدم (Brain Layer)
2. WHEN يتم التطوير THEN النظام SHALL يستخدم TypeScript للإدارة والتنسيق (Orchestrator Layer)
3. WHEN يحتاج وكيل لتحليل معقد THEN النظام SHALL يرسل Request لـ Python Service عبر FastAPI
4. WHEN يعمل Python Container THEN النظام SHALL يحتوي على Revolutionary Engine بالكامل
5. WHEN يتم التكامل THEN النظام SHALL يوفر Endpoints لـ Quantum/Neuromorphic/Swarm Processing

### المتطلب 13

**قصة المستخدم:** كمطور نظام، أريد دمج الأنظمة الموجودة (Python) مع النظام الجديد (TypeScript)، حتى أستفيد من الخوارزميات المتقدمة الموجودة.

#### معايير القبول

1. WHEN يتم تطوير النظام THEN النظام SHALL يدمج خوارزميات Revolutionary Breakdown Engine الموجودة
2. WHEN يتم التكامل THEN النظام SHALL يستفيد من Ultimate Breakdown System وتقنياته المتقدمة
3. WHEN يعمل النظام THEN النظام SHALL يحافظ على جميع التقنيات الثورية الموجودة (Quantum, Neuromorphic, Swarm Intelligence)
4. WHEN يتم التطوير THEN النظام SHALL يستخدم FastAPI لعرض نتائج المعالجة المتقدمة
5. WHEN يكتمل التكامل THEN النظام SHALL يوفر واجهة موحدة تجمع بين قوة Python وسهولة TypeScript

### المتطلب 14

**قصة المستخدم:** كمحلل تقني، أريد النظام يستفيد من التقنيات المتقدمة الموجودة، حتى أحصل على أفضل جودة تحليل ممكنة.

#### معايير القبول

1. WHEN يحلل النظام السيناريو THEN النظام SHALL يطبق تقنيات Semantic Synopsis Generator للملخصات الذكية
2. WHEN يصنف العناصر THEN النظام SHALL يستخدم Smart Prop Classifier لتجنب أخطاء التصنيف
3. WHEN يحلل الأزياء THEN النظام SHALL يطبق Wardrobe Inference Engine للاستنتاج الذكي
4. WHEN يحلل الأنماط THEN النظام SHALL يستخدم Cinematic Pattern Recognition لاقتراح ملاحظات إخراجية
5. WHEN يكتمل التحليل THEN النظام SHALL يطبق جميع التقنيات الثورية السبع الموجودة في الكود الحالي